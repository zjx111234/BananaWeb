/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function(a,b){if(typeof exports==="object"&&exports){b(exports)}else{var c={};b(c);if(typeof define==="function"&&define.amd){define(c)}else{a.Mustache=c}}}(this,function(a){var f=/\s*/;var m=/\s+/;var k=/\S/;var i=/\s*=/;var o=/\s*\}/;var t=/#|\^|\/|>|\{|&|=|!/;var g=RegExp.prototype.test;function s(z,y){return g.call(z,y)}function h(y){return !s(k,y)}var v=Object.prototype.toString;var l=Array.isArray||function(y){return v.call(y)==="[object Array]"};function b(y){return typeof y==="function"}function e(y){return y.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var d={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function n(y){return String(y).replace(/[&<>"'\/]/g,function(z){return d[z]})}function r(y){if(!l(y)||y.length!==2){throw new Error("Invalid tags: "+y)}return[new RegExp(e(y[0])+"\\s*"),new RegExp("\\s*"+e(y[1]))]}function x(O,E){E=E||a.tags;O=O||"";if(typeof E==="string"){E=E.split(m)}var I=r(E);var A=new u(O);var G=[];var F=[];var D=[];var P=false;var N=false;function M(){if(P&&!N){while(D.length){delete F[D.pop()]}}else{D=[]}P=false;N=false}var B,z,H,J,C,y;while(!A.eos()){B=A.pos;H=A.scanUntil(I[0]);if(H){for(var K=0,L=H.length;K<L;++K){J=H.charAt(K);if(h(J)){D.push(F.length)}else{N=true}F.push(["text",J,B,B+1]);B+=1;if(J==="\n"){M()}}}if(!A.scan(I[0])){break}P=true;z=A.scan(t)||"name";A.scan(f);if(z==="="){H=A.scanUntil(i);A.scan(i);A.scanUntil(I[1])}else{if(z==="{"){H=A.scanUntil(new RegExp("\\s*"+e("}"+E[1])));A.scan(o);A.scanUntil(I[1]);z="&"}else{H=A.scanUntil(I[1])}}if(!A.scan(I[1])){throw new Error("Unclosed tag at "+A.pos)}C=[z,H,B,A.pos];F.push(C);if(z==="#"||z==="^"){G.push(C)}else{if(z==="/"){y=G.pop();if(!y){throw new Error('Unopened section "'+H+'" at '+B)}if(y[1]!==H){throw new Error('Unclosed section "'+y[1]+'" at '+B)}}else{if(z==="name"||z==="{"||z==="&"){N=true}else{if(z==="="){I=r(E=H.split(m))}}}}}y=G.pop();if(y){throw new Error('Unclosed section "'+y[1]+'" at '+A.pos)}return w(c(F))}function c(D){var A=[];var C,z;for(var B=0,y=D.length;B<y;++B){C=D[B];if(C){if(C[0]==="text"&&z&&z[0]==="text"){z[1]+=C[1];z[3]=C[3]}else{A.push(C);z=C}}}return A}function w(D){var F=[];var C=F;var E=[];var A,B;for(var z=0,y=D.length;z<y;++z){A=D[z];switch(A[0]){case"#":case"^":C.push(A);E.push(A);C=A[4]=[];break;case"/":B=E.pop();B[5]=A[2];C=E.length>0?E[E.length-1][4]:F;break;default:C.push(A)}}return F}function u(y){this.string=y;this.tail=y;this.pos=0}u.prototype.eos=function(){return this.tail===""};u.prototype.scan=function(A){var z=this.tail.match(A);if(z&&z.index===0){var y=z[0];this.tail=this.tail.substring(y.length);this.pos+=y.length;return y}return""};u.prototype.scanUntil=function(A){var z=this.tail.search(A),y;switch(z){case -1:y=this.tail;this.tail="";break;case 0:y="";break;default:y=this.tail.substring(0,z);this.tail=this.tail.substring(z)}this.pos+=y.length;return y};function q(z,y){this.view=z==null?{}:z;this.cache={".":this.view};this.parent=y}q.prototype.push=function(y){return new q(y,this)};q.prototype.lookup=function(y){var B;if(y in this.cache){B=this.cache[y]}else{var A=this;while(A){if(y.indexOf(".")>0){B=A.view;var C=y.split("."),z=0;while(B!=null&&z<C.length){B=B[C[z++]]}}else{B=A.view[y]}if(B!=null){break}A=A.parent}this.cache[y]=B}if(b(B)){B=B.call(this.view)}return B};function p(){this.cache={}}p.prototype.clearCache=function(){this.cache={}};p.prototype.parse=function(A,z){var y=this.cache;var B=y[A];if(B==null){B=y[A]=x(A,z)}return B};p.prototype.render=function(B,y,A){var C=this.parse(B);var z=(y instanceof q)?y:new q(y);return this.renderTokens(C,z,A,B)};p.prototype.renderTokens=function(G,y,E,I){var C="";var K=this;function z(L){return K.render(L,y,E)}var A,H;for(var D=0,F=G.length;D<F;++D){A=G[D];switch(A[0]){case"#":H=y.lookup(A[1]);if(!H){continue}if(l(H)){for(var B=0,J=H.length;B<J;++B){C+=this.renderTokens(A[4],y.push(H[B]),E,I)}}else{if(typeof H==="object"||typeof H==="string"){C+=this.renderTokens(A[4],y.push(H),E,I)}else{if(b(H)){if(typeof I!=="string"){throw new Error("Cannot use higher-order sections without the original template")}H=H.call(y.view,I.slice(A[3],A[5]),z);if(H!=null){C+=H}}else{C+=this.renderTokens(A[4],y,E,I)}}}break;case"^":H=y.lookup(A[1]);if(!H||(l(H)&&H.length===0)){C+=this.renderTokens(A[4],y,E,I)}break;case">":if(!E){continue}H=b(E)?E(A[1]):E[A[1]];if(H!=null){C+=this.renderTokens(this.parse(H),y,E,H)}break;case"&":H=y.lookup(A[1]);if(H!=null){C+=H}break;case"name":H=y.lookup(A[1]);if(H!=null){C+=a.escape(H)}break;case"text":C+=A[1];break}}return C};a.name="mustache.js";a.version="0.8.1";a.tags=["{{","}}"];var j=new p();a.clearCache=function(){return j.clearCache()};a.parse=function(z,y){return j.parse(z,y)};a.render=function(A,y,z){return j.render(A,y,z)};a.to_html=function(B,z,A,C){var y=a.render(B,z,A);if(b(C)){C(y)}else{return y}};a.escape=n;a.Scanner=u;a.Context=q;a.Writer=p}));
/*!
 * zeroModal.js
 * http://git.oschina.net/cylansad/zeroModal
 *
 * Copyright 2016, Sad
 */
(function(a){if(typeof module!=="undefined"&&typeof exports==="object"&&define.cmd){module.exports=a}else{if(typeof define==="function"&&define.amd){define(function(){return a})}else{window.zeroModal=a}}}((function(f,h){var w={};var g='<div zero-unique-overlay="{{unique}}" class="zeromodal-overlay" style="opacity:{{opacity}};z-index:{{_tmp_last_zindex}};width:{{_width}}px;height:{{_height}}px"></div>';var s='<div zero-unique-container="{{unique}}" class="zeromodal-container" style="z-index:{{_tmp_last_zindex}};width:{{_width}}px;height:{{_height}}px;left:{{_left}}px;top:{{_top}}">';s+='       {{#drag}}<div zero-unique-top="{{unique}}" class="zeromodal-top"></div>{{/drag}}';s+='       <div zeromodal-unqiue-header="{{unique}}" class="zeromodal-header">';s+='           {{#close}}<div title="关闭" zero-close-unique="{{unique}}" class="zeromodal-close">×</div>{{/close}}';s+='           {{#max}}<div title="最大化/取消最大化" zero-max-unique="{{unique}}" class="zeromodal-max"></div>{{/max}}';s+='           <span class="modal-title">{{title}}</span>';s+="       </div>";s+='       <div zero-unique-body="{{unique}}" class="zeromodal-body">';s+='           {{#url}}<div class="zeromodal-loading1"></div>{{#iframe}}<iframe zero-unique-frame="{{unique}}" src="{{url}}" class="zeromodal-frame"></iframe>{{/iframe}}{{/url}}';s+="       </div>";s+='       {{#resize}}<div zero-unique-sweep-tee="{{unique}}" class="zeromodal-sweep-tee"></div>{{/resize}}';s+="   </div>";var t={unique:"",title:"",content:"",escape:true,url:false,iframe:false,width:"500px",height:"300px",top:h,transition:false,opacity:0.2,overlay:true,overlayClose:false,drag:true,dragHandle:"top",close:true,max:false,resize:false,resizeAfterFn:h,ok:false,okTitle:"确定",okFn:false,cancel:false,cancelTitle:"关闭",cancelFn:true,buttonTopLine:true,buttons:[],esc:false,onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false};var e=false;var r=10000;var l={};w.show=function(y){var z=n(y);j(z);e=true;f(window).resize(function(){if(e){i(z)}});return z.unique};w.close=function(y){b({unique:y});e=false;delete l[y]};w.closeAll=function(){f('[role="zeromodal-loading"]').remove();f(".zeromodal-overlay").remove();f(".zeromodal-container").each(function(){var A=f(this);var z=A.attr("zero-unique-container");if(z!==h&&l[z]!==h){var y=l[z];if(typeof y.onCleanup==="function"){y.onCleanup(y)}A.remove();if(typeof y.onClosed==="function"){y.onClosed(y)}delete l[z]}});e=false};w.loading=function(B){var E=n();v(E);r++;var D=f(window).scrollTop()+Math.ceil(f(window).height()/3);if(B===h){B=1}if(B===1||B===2){var C="zeromodal-loading"+B;f("body").append('<div role="zeromodal-loading" zero-unique-loading="'+E.unique+'" class="'+C+'" style="z-index:'+r+";top:"+D+'px;"></div>')}else{if(k([3,4,5,6],B)){var y={};switch(B){case 3:y.className="pacman";y.containerCount=5;break;case 4:y.className="line-scale-pulse-out";y.containerCount=5;break;case 5:y.className="line-spin-fade-loader";y.containerCount=8;break;case 6:y.className="square-spin";y.containerCount=1;break}var z='<div role="zeromodal-loading" zero-unique-loading="'+E.unique+'" class="'+y.className+'" style="z-index:'+r+";left:46%;top:"+D+'px;">';for(var A=0;A<y.containerCount;A++){z+="  <div></div>"}z+="  </div>";f("body").append(z)}}return E.unique};w.progress=function(E,y){var B=n();v(B);r++;if(E===h){E=3}var G=f(window).scrollTop()+Math.ceil(f(window).height()/3);var F={};switch(E){case 3:F.className="pacman";F.containerCount=5;break;case 4:F.className="line-scale-pulse-out";F.containerCount=5;break;case 5:F.className="line-spin-fade-loader";F.containerCount=8;break;case 6:F.className="square-spin";F.containerCount=1;break}var z='<div zero-unique-loading="'+B.unique+'" class="'+F.className+'" style="z-index:'+r+";left:46%;top:"+G+'px;">';for(var D=0;D<F.containerCount;D++){z+="  <div></div>"}z+="  </div>";z+='  <div zero-unique-loading="'+B.unique+'" class="zeromodal-progress-content" style="z-index:'+r+";top:"+(G+64)+'px;"><span id="progess_content_'+B.unique+'"></span></div>';z+="";f("body").append(z);var C=0;var A=setInterval(function(){f.ajax({url:y.getProgressUrl+"?_="+new Date().getTime(),dataType:"json",type:"get",success:function(H){f("#progess_content_"+B.unique).html(H.progress);if(H.progress==="finish"){clearInterval(A);f.get(y.clearProgressUrl);w.close(B.unique)}}});C++;if(C>=500){clearInterval(A)}},500);return B.unique};w.progress_old=function(A){var D=n();v(D);r++;var G=f(window).scrollTop()+Math.ceil(f(window).height()/3);var H=f(window).width()/2-200;var E=1;if(A!==h&&A>E&&A<10){E=A}var z='<div class="zeromodal-progress" style="top:'+G+"px;left:"+H+"px;z-index:"+r+'">';z+='      <div zeromodal-progress-bar="'+D.unique+'" class="zeromodal-progress-bar" style="width: 0%; background: #92c26a;">';z+='          <span class="zeromodal-progress-icon zeromodal-fa zeromodal-fa-check" style="border-color:#92c26a; color:#92c26a;"><div zeromodal-progress-val="'+D.unique+'" class="zeromodal-progress-val">&nbsp;0%</div></span>';z+="      </div>";z+="  </div>";f("body").append(z);var y=0;var F=f('[zeromodal-progress-bar="'+D.unique+'"]');var C=f('[zeromodal-progress-val="'+D.unique+'"]');var B=setInterval(function(){y+=1;F.css("width",y+"%");C.html((y>9?y:"&nbsp;"+y)+"%");if(y>=100){C.html('<span class="line tip"></span><span class="line long"></span>');clearInterval(B)}},E*100);return D.unique};w.alert=function(z){var y={iconClass:"show-zero2 zeromodal-icon-info",iconText:"!"};var A={};f.extend(A,y);if(typeof z==="object"){f.extend(A,z)}else{A.content=z}p(A)};w.error=function(y){var z={iconDisplay:'<div class="show-zero2 zeromodal-icon zeromodal-error"><span class="x-mark"><span class="line left"></span><span class="line right"></span></span></div>'};if(typeof y==="object"){f.extend(z,y)}else{z.content=y}p(z)};w.success=function(y){var z={iconDisplay:'<div class="show-zero2 zeromodal-icon zeromodal-success"><span class="line tip"></span><span class="line long"></span><div class="placeholder"></div></div>'};if(typeof y==="object"){f.extend(z,y)}else{z.content=y}p(z)};w.confirm=function(A,z){var y={iconClass:"show-zero2 zeromodal-icon-question",iconText:"?",};var B={};f.extend(B,y);if(typeof z==="function"){B.okFn=z}B.cancel=true;if(typeof A==="object"){f.extend(B,A)}else{B.content=A}p(B)};function n(y){var z={};f.extend(z,t);f.extend(z,y);if(typeof z.unique==="undefined"||z.unique===""){z.unique=c()}l[z.unique]=z;return z}function j(y){if(typeof y.onOpen==="function"){y.onOpen(y)}v(y);m(y)}function b(y){if(typeof y==="object"){if(typeof y.onCleanup==="function"){y.onCleanup()}f('[zero-unique-overlay="'+y.unique+'"]').remove();f('[zero-unique-container="'+y.unique+'"]').remove();f('[zero-unique-loading="'+y.unique+'"]').remove();if(typeof y.onClosed==="function"){y.onClosed()}}}function v(z){r++;z._tmp_last_zindex=r;z._width=f(document).width();z._height=f(document).height();if(z.overlay){var y=f(Mustache.render(g,z));f("body").append(y);if(z.overlayClose){y.css("cursor","pointer");y.click(function(){b(z)})}else{y.click(function(){u(f('[zero-unique-container="'+z.unique+'"]'))})}}}function m(A){r++;var C=A.width.replace("px","");var E=A.height.replace("px","");var z=f(window).width();var D=f(window).height();if(C.indexOf("%")!==-1){C=(z*parseInt(C.replace("%",""))/100)}if(E.indexOf("%")!==-1){E=(D*parseInt(E.replace("%",""))/100)}if(typeof C==="string"){C=parseInt(C)}if(typeof E==="string"){E=parseInt(E)}var H=(z-C)/2;var G=(f(window).scrollTop()+Math.ceil((f(window).height()-E)/3))+"px";if(A.top!==h){G=A.top}A._tmp_last_zindex=r;A._width=C;A._height=E;A._left=H;A._top=G;f("body").append(Mustache.render(s,A));if(A.drag){var y;if(A.dragHandle==="container"){y=f('[zero-unique-container="'+A.unique+'"]')[0]}else{y=f('[zero-unique-top="'+A.unique+'"]')[0]}new a(f('[zero-unique-container="'+A.unique+'"]')[0],{handle:y,limit:false})}f('[zero-close-unique="'+A.unique+'"]').click(function(){b(l[f(this).attr("zero-close-unique")])});f('[zero-max-unique="'+A.unique+'"]').click(function(){if(f(this).attr("max")!=="1"){i(l[f(this).attr("zero-max-unique")],"90%","85%");f(this).attr("max","1")}else{i(l[f(this).attr("zero-max-unique")]);f(this).attr("max","0")}o(A)});if(A.transition){f(".zeromodal-container").animate({top:G},300)}o(A);if(A.resize){x(A.unique,A)}if(typeof A.onLoad==="function"){A.onLoad(A)}var B=f('[zero-unique-body="'+A.unique+'"]');if(!A.url){B.addClass("zeromodal-overflow-y");if(A.escape){B.html(A.content)}else{B.text(A.content)}if(typeof A.onComplete==="function"){A.onComplete(A)}}else{B.append('<div class="zeromodal-loading1"></div>');if(A.iframe){var F=f('[zero-unique-frame="'+A.unique+'"]');F.load(function(){f(".zeromodal-loading1").remove();if(typeof A.onComplete==="function"){A.onComplete(A)}})}else{B.addClass("zeromodal-overflow-y");f.ajax({url:A.url,dataType:"html",type:"get",success:function(I){B.append(I);f(".zeromodal-loading1").remove();if(typeof A.onComplete==="function"){A.onComplete(A)}}})}}d(A,f('[zero-unique-container="'+A.unique+'"]'));if(A.esc){f("body").one("keyup",function(I){if(I.keyCode===27){b(A)}})}}function d(D,A){if(D.ok||D.cancel||(D.buttons!==h&&D.buttons.length>0)){var z='<div class="zeromodal-footer">';z+=D.buttonTopLine?'<div class="zeromodal-line"></div>':"";z+='        <div zeromodal-btn-container="'+D.unique+'" class="zeromodal-btn-container"></div>';z+="   </div>";A.append(z);if(D.buttons!==h&&D.buttons.length>0){for(var C=0;C<D.buttons.length;C++){var y=D.buttons[C];var B=f('<button zero-btn-unique="'+D.unique+'" class="'+(y.className||"")+'"'+(y.attr!==h?" "+y.attr:"")+">"+y.name+"</button>");if(typeof y.fn==="function"){(function(G){B.click(function(){var H=G.fn(D);if(typeof H==="undefined"||H){b(D)}})}(y))}f('[zeromodal-btn-container="'+D.unique+'"]').append(B)}}else{if(D.ok){var E=f('<button zeromodal-btn-ok="'+D.unique+'" class="zeromodal-btn zeromodal-btn-primary">'+D.okTitle+"</button>");f('[zeromodal-btn-container="'+D.unique+'"]').append(E);E.click(function(){if(typeof D.okFn==="function"){var G=D.okFn();if(typeof G==="undefined"||G){b(D)}}else{b(D)}})}if(D.cancel){var F=f('<button zeromodal-btn-cancel="'+D.unique+'" class="zeromodal-btn zeromodal-btn-default">'+D.cancelTitle+"</button>");f('[zeromodal-btn-container="'+D.unique+'"]').append(F);F.click(function(){if(typeof D.cancelFn==="function"){var G=D.cancelFn();if(typeof G==="undefined"||G){b(D)}}else{b(D)}})}}}}function p(A){if(typeof A==="undefined"||typeof A.cancelTitle==="undefined"){A.cancelTitle="取消"}var D=n(A);D.width="360px";D.height="300px";D.esc=true;D.ok=true;D.buttonTopLine=false;if(typeof _okFn!=="undefined"){D.okFn=_okFn}if(typeof cancelFn!=="undefined"){D.cancelFn=cancelFn}var z=D.content||"";var y=D.contentDetail||"";D.content="";j(D);var B;if(typeof D.iconDisplay!=="undefined"){B=f(D.iconDisplay)}else{B=f('<div class="zeromodal-icon '+D.iconClass+'">'+D.iconText+"</div>")}var C=f('<div class="zeromodal-title1">'+z+'</div><div class="zeromodal-title2">'+y+"</div>");f('[zero-unique-body="'+D.unique+'"]').append(B);f('[zero-unique-body="'+D.unique+'"]').append(C);f('[zero-unique-body="'+D.unique+'"]').removeClass("zeromodal-overflow-y");f('[zeromodal-btn-ok="'+D.unique+'"]').focus();e=true;f(window).resize(function(){if(e){i(D)}})}function i(A,z,E){f('[zero-unique-overlay="'+A.unique+'"]').css("width",f(document).width()+"px").css("height",f(document).height()+"px");var y=f(window).width();var C=f(window).height();var B=z!==h?z.replace("px",""):A.width.replace("px","");var D=E!==h?E.replace("px",""):A.height.replace("px","");if(B.indexOf("%")!==-1){B=(y*parseInt(B.replace("%",""))/100)}if(D.indexOf("%")!==-1){D=(C*parseInt(D.replace("%",""))/100)}if(typeof B==="string"){B=parseInt(B)}if(typeof D==="string"){D=parseInt(D)}var G=(y-B)/2;var F=f(window).scrollTop()+Math.ceil((f(window).height()-D)/3);f('[zero-unique-container="'+A.unique+'"]').css("width",B+"px").css("height",D+"px").css("left",G+"px").css("top",F+"px")}function q(C){var z=f(window).width();var A=f(window).height();var y=parseInt(f('[zero-unique-container="'+C.unique+'"]').css("width").replace("px",""));var B=parseInt(f('[zero-unique-container="'+C.unique+'"]').css("height").replace("px",""));var D=(z-y)/2;var E=f(window).scrollTop()+Math.ceil((f(window).height()-B)/3);f('[zero-unique-container="'+C.unique+'"]').css("left",D+"px").css("top",E+"px")}function o(A){var z=f('[zeromodal-unqiue-header="'+A.unique+'"]').height();var B=(A.ok||A.cancel||(A.buttons!==h&&A.buttons.length>0))?60:0;var y=f('[zero-unique-container="'+A.unique+'"]').height()-z-10-B;f('[zero-unique-body="'+A.unique+'"]').css("height",y)}function u(A){if(A.length===0){return}var z=A.position().left;for(var y=0;y<2;y++){A.animate({left:z-2},50);A.animate({left:z},50);A.animate({left:z+2},50)}A.animate({left:z},50)}function k(y,A){for(var z=0;z<y.length;z++){if(y[z]===A){return true}}return false}function c(){var B=[];var y="0123456789abcdef";for(var z=0;z<36;z++){B[z]=y.substr(Math.floor(Math.random()*16),1)}B[14]="4";B[19]=y.substr((B[19]&3)|8,1);B[8]=B[13]=B[18]=B[23]="";var A=B.join("");return A}function x(E,B){var F;var z;var y;var C=false;var D=f('[zero-unique-sweep-tee="'+E+'"]')[0];var A=f('[zero-unique-body="'+E+'"]')[0];document.onmousemove=function(G){if(f('[zero-unique-container="'+B.unique+'"]').size()===0){return}z=G.pageX;y=G.pageY;if(F!==h){C=true}};D.onmousedown=function(){document.onselectstart=function(){return false};var G=y-D.offsetTop;var H=z-D.offsetLeft;F=setInterval(function(){if(F&&C){var J=z-H;var I=y-G;f(".zeromodal-container").css("width",J+3+"px").css("height",I+3+"px")}},5)};document.onmouseup=function(){if(f('[zero-unique-container="'+B.unique+'"]').size()===0){return}document.onselectstart=function(){return true};clearInterval(F);F=h;C=false;q(B);o(B);if(B.resizeAfterFn!==h&&typeof B.resizeAfterFn==="function"){B.resizeAfterFn(B)}}}function a(){this.initialize.apply(this,arguments)}a.prototype={initialize:function(z,y){this.drag=z;this._x=this._y=0;this._moveDrag=this.bind(this,this.moveDrag);this._stopDrag=this.bind(this,this.stopDrag);this.setOptions(y);this.handle=this.options.handle;this.maxContainer=this.options.maxContainer;this.maxTop=Math.max(this.maxContainer.clientHeight,this.maxContainer.scrollHeight)-this.drag.offsetHeight;this.maxLeft=Math.max(this.maxContainer.clientWidth,this.maxContainer.scrollWidth)-this.drag.offsetWidth;this.limit=this.options.limit;this.lockX=this.options.lockX;this.lockY=this.options.lockY;this.lock=this.options.lock;this.onStart=this.options.onStart;this.onMove=this.options.onMove;this.onStop=this.options.onStop;this.handle.style.cursor="move";this.changeLayout();this.addHandler(this.handle,"mousedown",this.bind(this,this.startDrag))},changeLayout:function(){this.drag.style.top=this.drag.offsetTop+"px";this.drag.style.left=this.drag.offsetLeft+"px";this.drag.style.position="absolute";this.drag.style.margin="0"},startDrag:function(y){var z=y||window.event;this._x=z.clientX-this.drag.offsetLeft;this._y=z.clientY-this.drag.offsetTop;this.addHandler(document,"mousemove",this._moveDrag);this.addHandler(document,"mouseup",this._stopDrag);if(z.preventDefault){z.preventDefault()}if(this.handle.setCapture){this.handle.setCapture()}this.onStart()},moveDrag:function(y){var B=y||window.event;var A=B.clientY-this._y;var z=B.clientX-this._x;if(this.lock){return}if(!this.lockY){this.drag.style.top=A+"px"}if(!this.lockX){this.drag.style.left=z+"px"}if(B.preventDefault){B.preventDefault()}this.onMove()},stopDrag:function(){this.removeHandler(document,"mousemove",this._moveDrag);this.removeHandler(document,"mouseup",this._stopDrag);if(this.handle.releaseCapture){this.handle.releaseCapture()}this.onStop()},setOptions:function(y){this.options={handle:this.drag,limit:true,lock:false,lockX:false,lockY:false,maxContainer:document.documentElement||document.body,onStart:function(){},onMove:function(){},onStop:function(){}};for(var z in y){this.options[z]=y[z]}},addHandler:function(z,A,y){return z.addEventListener?z.addEventListener(A,y,false):z.attachEvent("on"+A,y)},removeHandler:function(z,A,y){return z.removeEventListener?z.removeEventListener(A,y,false):z.detachEvent("on"+A,y)},bind:function(z,y){return function(){return y.apply(z,arguments)}}};return w}(jQuery))));